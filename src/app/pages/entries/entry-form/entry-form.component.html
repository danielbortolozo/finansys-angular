<app-bread-crumb
  [items] = "[{text: 'Lançamentos', link: '/entries'}, {text: pageTitle}]"
></app-bread-crumb>

 
 <div class="row mb-4">
    <div class="col-md-9">
        <h1 class="h2 border-left pl-2">
          {{pageTitle}}
        </h1>    
    </div> 
    <div class="col-md-3">
     <a routerLink="/entries" class="btn btn-light float-right">
         << Voltar
     </a>
     </div>
 </div>    
<form [formGroup]="resourceForm" (submit)="submitForm()">
   <div class="card">
       <div class="card-header">
           Informações sobre a lançamento.
       </div>
       <div class="card-body">

         <div class="form-row">               
                  <!--tipo-->
               <div class="form-group col-md-2">
                   <label for="tipe">Tipo</label>
                   <select name="type" id="type" formControlName="type" class="form-control">
                    <option *ngFor="let option of typeOptions" [value]="option.value">{{option.text}}</option> 
                    
                        

                   </select>   

                   <div class="text-danger" *ngIf="resourceForm.get('type').invalid && resourceForm.get('type').touched">                      
                      <div *ngIf="resourceForm.get('type').errors.required" >
                          O campo nome é obrigatório.
                      </div>                    
                   </div>       
               </div>
                <!--name-->
                <div class="form-group col-md-5">
                    <label for="name">Lançamento</label>
                    <input type="text" class="form-control" id="name" 
                           formControlName="name"> 
                    <div class="text-danger" *ngIf="resourceForm.get('name').invalid && resourceForm.get('name').touched">
                       <div *ngIf="resourceForm.get('name').errors.required" >
                           O campo nome é obrigatório.
                       </div> 
                       <div *ngIf="resourceForm.get('name').errors.minlength" >
                         O campo nome deve ter no mínimo 3 caracters.
                       </div> 
                    </div>       
                </div>
                 <!--amount-->
                 <div class="form-group col-md-3">
                    <label for="name">Valor</label>
                    <div class="input-group">
                        <div class="input-group-prepend">
                          <div class="input-group-text">R$</div>
                        </div>
                        <input [imask]="imaskConfig" type="text" class="form-control text-right" id="amount" formControlName="amount"> 
                    </div>
                    
                    <div class="text-danger" *ngIf="resourceForm.get('amount').invalid && resourceForm.get('amount').touched">
                       <div *ngIf="resourceForm.get('amount').errors.required" >
                           O campo nome é obrigatório.
                       </div>                        
                    </div>       
                  </div>   
                
                  <!--date-->
            <div class="form-group col-md-2">
                <label for="date">Data</label>               
                
                <input type="text" class="form-control" id="data" formControlName="data" >             
     
            </div>
         </div>   
         <div class="form-row"> 
               <!--paid-->
               <div class="form-group col-md-2">
                <label for="paid">Pagamento</label>
                <div class="btn-group">
                   <label (click)="resourceForm.get('paid').setValue(true)" [class.active]="resourceForm.get('paid').value == true" class="btn btn-outline-info">
                       Pago
                    </label>     
                   <label (click)="resourceForm.get('paid').setValue(false)" [class.active]="resourceForm.get('paid').value == false" class="btn btn-outline-info">
                       Pendente
                    </label>               
                </div>
                
                <div class="text-danger" *ngIf="resourceForm.get('paid').invalid && resourceForm.get('paid').touched">
                   <div *ngIf="resourceForm.get('paid').errors.required" >
                       O campo nome é obrigatório.
                   </div>                        
                </div>       
              </div> 
              
              <div class="form-group col-md-3">
                <label for="tipe">Categoria</label>
                <select name="categoryId" id="categoryId" formControlName="categoryId" class="form-control">
                 <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option> 
                 
                </select>   

                <div class="text-danger" *ngIf="resourceForm.get('categoryId').invalid && resourceForm.get('categoryId').touched">                      
                   <div *ngIf="resourceForm.get('categoryId').errors.required" >
                       O campo nome é obrigatório.
                   </div>                    
                </div>       
            </div>

              <div class="form-group col-md-5">
                <label for="description">Descrição</label>
                <input type="text" class="form-control" id="description" formControlName="description">
              </div>            
             
         </div>
                  
       </div>
   </div> 
   <div class="alert alert-danger mt-4" *ngIf="serverErrorsMessages"> 
       <strong>Erro no servidor</strong>
       <ul>
           <li *ngFor="let error of serverErrorsMessages">{{error}} </li>    
       </ul>
   </div>    
   <button type="submit" class="btn btn-primary btn-lg float-right mt-3" 
           [disabled]="submittingForm || resourceForm.invalid">Salvar</button>
</form>
